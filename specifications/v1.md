# `.xff` specification v1

> [!note]
> ***This version is not yet finalized.***

This specification differs significantly from version 0 and cannot parse v0 files.

`.xff` stands for `xqhares file format` or `xqhared file format`, pronounced `squares file format` or `squared file format`.
Alternatively, it could be called `xtended file format` or `extended file format`.

The binary data in `.xff` is encoded in ASCII, specifically Windows-1252.
Any mention of ASCII should be understood to be referring to Windows-1252 specifically. 
[See the reference table here.](ascii-reference.md)

`.xff` is a very simple format. It uses a small subset of ASCII control characters to wrap arbitrary or ASCII data.
If used with ASCII data only, it can hold any String, Number or Control character and any amount of them.
The `.xff` format has no set maximum file size.

A `.xff`file starts with one byte (8 bits) of data, encoding the current version of the `.xff` specification.
The version number starts at 0 and increases by 1 each time a new version is added.
Any implementation of this specification should be able to read any version of the specification, but may choose to only support a specific set of versions or version.

![Chart of the composition of a `.xff` file in token form.](../pictures/xff_v1-main-chart.png)


## Musings about a future version 1

- A way to represent arrays of data in byte form directly in `.xff` would be nice.
    - I am continuously running into the need to at least be able to store key-value pairs in `.xff` files.
- Some kind of optional metadata for any data, be it strings, data or even command characters.
- Maybe integrate an object store directly, solving all of the above?
- Think about what to do with features, implement version dependent read and write functions?
- Everything gets a length attribute. For performance.
    - Variable amount of length-bytes by prepending a single byte encoding the length of the length-bytes. Maximum length possible: 1.2E614 bytes - Length of a Petabyte: 1e15 which needs only 8 bytes.

## Note for version 255 - move to v2 when v1 done
- Add a second version byte to the start of the file, easy 256 more versions right there!
    - Fuck it, 2 more version bytes for 65.536 more versions! If I ever reach 255 I'll need them!
